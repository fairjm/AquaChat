<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AquaChat.Pages.Templates.ChatItemTemplate"
             xmlns:models="clr-namespace:AquaChat.Models"
             x:DataType="models:Chat">

    <ContentView.Resources>
        <ResourceDictionary>
            <Style x:Key="NameTextStyle" TargetType="Label">
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="FontSize" Value="20" />
                <Setter Property="FontFamily" Value="Metropolis Regular" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="Margin" Value="12, 0" />
            </Style>

            <Style x:Key="MessageTextStyle" TargetType="Label">
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="LineBreakMode" Value="TailTruncation" />
                <Setter Property="MaxLines" Value="1" />
                <Setter Property="Margin" Value="12, 0" />
            </Style>

            <Color x:Key="TimeColor">#B2ACBE</Color>

            <Style x:Key="TimeTextStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource TimeColor}" />
                <Setter Property="FontSize" Value="11" />
            </Style>
        </ResourceDictionary>
    </ContentView.Resources>

    <!-- can't add swipeView in collectionView https://github.com/dotnet/maui/issues/8168 -->
    <!--<SwipeView>
        <SwipeView.LeftItems>
            <SwipeItems>
                <SwipeItem Text="Delete"
                       BackgroundColor="LightPink"
                       Invoked="OnDeleteSwipeItemInvoked" />
            </SwipeItems>
        </SwipeView.LeftItems>-->
        <StackLayout HeightRequest="90">
            <Frame CornerRadius="15" HeightRequest="80" Padding="0">
                <Grid ColumnDefinitions="*, Auto" Padding="20,10,10,0">
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer 
                        Tapped="OnItemTapped"  
                        NumberOfTapsRequired="1" />
                    </Grid.GestureRecognizers>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="PointerOver">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="#80E0E0E0" />
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Normal">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="#20E0E0E0" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <StackLayout Grid.Row="0">
                        <Label        
                    Text="{Binding Title}"
                    Style="{StaticResource NameTextStyle}"/>
                        <Label         
                    Text="{Binding LastMessage}"
                    Style="{StaticResource MessageTextStyle}"/>
                    </StackLayout>
                    <Label 
                Grid.Row="0"
                Grid.Column="1"
                Text="{Binding Created}"
                Style="{StaticResource TimeTextStyle}"/>
                </Grid>
            </Frame>
        </StackLayout>
    <!--</SwipeView>-->
</ContentView>
